(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{213:function(s,e,t){"use strict";t.r(e);var r=t(0),a=Object(r.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"fetch-plugin-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fetch-plugin-api"}},[s._v("#")]),s._v(" Fetch Plugin API")]),s._v(" "),t("p",[s._v("Formio.js可以通过多种方式注册可挂接到请求调用的插件。")]),s._v(" "),t("h2",{attrs:{id:"插件方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件方法"}},[s._v("#")]),s._v(" 插件方法")]),s._v(" "),t("h3",{attrs:{id:"formio-registerplugin-plugin-name"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#formio-registerplugin-plugin-name"}},[s._v("#")]),s._v(" Formio.registerPlugin(plugin, [name])")]),s._v(" "),t("p",[s._v("向Formio.js注册插件。可以提供一个可选的name参数，以与Formio.getPlugin（）一起使用。")]),s._v(" "),t("p",[s._v("插件必须是一个对象，并且可以具有以下任何可选属性：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("priority")]),s._v("：插件相对于其他确定呼叫顺序的插件的优先级。数字越大优先级越高。如果未指定，则默认优先级为0。")]),s._v(" "),t("li",[t("code",[s._v("init")]),s._v("：向Formio注册时调用的初始化函数。它将接收全局Formio对象作为其第一个参数。")]),s._v(" "),t("li",[t("code",[s._v("deregister")]),s._v("：向Formio注销时调用的注销功能。它将接收全局Formio对象作为其第一个参数。")])]),s._v(" "),t("p",[s._v("有关在插件中使用钩子的信息，请参见"),t("a",{attrs:{href:"#plugin-hooks"}},[s._v("下文")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"formio-getplugin-name"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#formio-getplugin-name"}},[s._v("#")]),s._v(" Formio.getPlugin(name)")]),s._v(" "),t("p",[s._v("返回以给定名称注册的插件。")]),s._v(" "),t("h3",{attrs:{id:"formio-deregisterplugin-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#formio-deregisterplugin-plugin"}},[s._v("#")]),s._v(" Formio.deregisterPlugin(plugin)")]),s._v(" "),t("p",[s._v("使用Formio.js取消注册插件。在插件注销之前，将调用"),t("code",[s._v("deregister")]),s._v("函数。该"),t("code",[s._v("plugin")]),s._v("参数可以是插件或注册时提供的可选名称的实例。如果插件已成功注销，则返回true；如果插件不存在，则返回false。")]),s._v(" "),t("h3",{attrs:{id:"formio-events"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#formio-events"}},[s._v("#")]),s._v(" Formio.events")]),s._v(" "),t("p",[s._v("这是一个"),t("a",{attrs:{href:"https://nodejs.org/api/events.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("EventEmitter"),t("OutboundLink")],1),s._v(" ，可以用作插件中的事件发布/订阅系统。")]),s._v(" "),t("h2",{attrs:{id:"插件钩子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件钩子"}},[s._v("#")]),s._v(" 插件钩子")]),s._v(" "),t("p",[s._v("插件可以提供在库中不同位置调用的钩子。要在下面使用特定的钩子，请向您的插件添加与该钩子同名的函数。")]),s._v(" "),t("p",[s._v("以下是当前可用的钩子。")]),s._v(" "),t("h3",{attrs:{id:"prerequest-requestargs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prerequest-requestargs"}},[s._v("#")]),s._v(" preRequest(requestArgs)")]),s._v(" "),t("p",[s._v("在请求之前调用。如果返回promise，Formio.js将在开始请求之前等待其resolve。")]),s._v(" "),t("p",[t("code",[s._v("requestArgs")]),s._v(" 是包含以下属性的对象：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("formio")]),s._v(": 调用请求的Formio实例。")]),s._v(" "),t("li",[t("code",[s._v("type")]),s._v(": 请求的资源类型（例如：form，forms，submission）。")]),s._v(" "),t("li",[t("code",[s._v("url")]),s._v(": 请求的网址。")]),s._v(" "),t("li",[t("code",[s._v("method")]),s._v(": HTTP请求方法。")]),s._v(" "),t("li",[t("code",[s._v("data")]),s._v(": HTTP请求正文（如果有）。")]),s._v(" "),t("li",[t("code",[s._v("opts")]),s._v(": 请求配置")])]),s._v(" "),t("h3",{attrs:{id:"request-requestargs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#request-requestargs"}},[s._v("#")]),s._v(" request(requestArgs)")]),s._v(" "),t("p",[s._v("在请求之前调用，使插件有机会在发送请求之前完成请求。如果返回非空，未定义的值（或解析为一个的Promise），该值将用作请求的结果，而不是发出默认的网络请求。")]),s._v(" "),t("p",[s._v("只有返回值的第一高优先级将替换内容。如果优先级较高的插件返回值，则不会调用您的插件的钩子。")]),s._v(" "),t("p",[t("code",[s._v("requestArgs")]),s._v(" 是包含以下属性的对象：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("formio")]),s._v(": 调用请求的Formio实例。")]),s._v(" "),t("li",[t("code",[s._v("type")]),s._v(": 请求的资源类型（例如：form，forms，submission）。")]),s._v(" "),t("li",[t("code",[s._v("url")]),s._v(": 请求的网址。")]),s._v(" "),t("li",[t("code",[s._v("method")]),s._v(": HTTP请求方法。")]),s._v(" "),t("li",[t("code",[s._v("data")]),s._v(": HTTP请求正文（如果有）。")]),s._v(" "),t("li",[t("code",[s._v("opts")]),s._v(": 请求配置")])]),s._v(" "),t("h3",{attrs:{id:"wraprequestpromise-promise-requestargs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wraprequestpromise-promise-requestargs"}},[s._v("#")]),s._v(" wrapRequestPromise(promise, requestArgs)")]),s._v(" "),t("p",[s._v("在发出请求时调用，并使插件可以访问用户发出请求时返回的promise。从此钩子返回的承诺将返回给用户。您可以使用该钩子包装原始的Promise或扩展Promise链。（您必须返回使用原始承诺的承诺，否则返回给用户的承诺将无法按预期解决）。")]),s._v(" "),t("p",[t("code",[s._v("promise")]),s._v(" 是请求的承诺。")]),s._v(" "),t("p",[t("code",[s._v("requestArgs")]),s._v(" 是包含以下属性的对象：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("formio")]),s._v(": 调用请求的Formio实例。")]),s._v(" "),t("li",[t("code",[s._v("type")]),s._v(": 请求的资源类型（例如：form，forms，submission）。")]),s._v(" "),t("li",[t("code",[s._v("url")]),s._v(": 请求的网址。")]),s._v(" "),t("li",[t("code",[s._v("method")]),s._v(": HTTP请求方法。")]),s._v(" "),t("li",[t("code",[s._v("data")]),s._v(": HTTP请求正文（如果有）。")]),s._v(" "),t("li",[t("code",[s._v("opts")]),s._v(": 请求配置")])]),s._v(" "),t("h3",{attrs:{id:"prestaticrequest-requestargs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prestaticrequest-requestargs"}},[s._v("#")]),s._v(" preStaticRequest(requestArgs)")]),s._v(" "),t("p",[s._v("与"),t("code",[s._v("preRequest")]),s._v("钩子相同，但用于使用全局Formio对象而不是Formio实例的请求。这包括类似功能"),t("code",[s._v("Formio.loadProjects()")]),s._v("，"),t("code",[s._v("Formio.availableActions()")]),s._v("，"),t("code",[s._v("Formio.currentUser()")]),s._v("。")]),s._v(" "),t("p",[t("code",[s._v("requestArgs")]),s._v(" 是包含以下属性的对象：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("url")]),s._v(": 请求的网址。")]),s._v(" "),t("li",[t("code",[s._v("method")]),s._v(": HTTP请求方法。")]),s._v(" "),t("li",[t("code",[s._v("data")]),s._v(": HTTP请求正文（如果有）。")])]),s._v(" "),t("h3",{attrs:{id:"staticrequest-requestargs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#staticrequest-requestargs"}},[s._v("#")]),s._v(" staticRequest(requestArgs)")]),s._v(" "),t("p",[s._v("与"),t("code",[s._v("request")]),s._v("钩子相同，但用于使用全局Formio对象而不是Formio实例的请求。这包括类似功能"),t("code",[s._v("Formio.loadProjects()")]),s._v("，"),t("code",[s._v("Formio.availableActions()")]),s._v("，"),t("code",[s._v("Formio.currentUser()")]),s._v("。")]),s._v(" "),t("p",[t("code",[s._v("requestArgs")]),s._v(" 是包含以下属性的对象：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("url")]),s._v(": 请求的网址。")]),s._v(" "),t("li",[t("code",[s._v("method")]),s._v(": HTTP请求方法。")]),s._v(" "),t("li",[t("code",[s._v("data")]),s._v(": HTTP请求正文（如果有）。")])]),s._v(" "),t("h3",{attrs:{id:"wrapstaticrequestpromise-promise-requestargs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wrapstaticrequestpromise-promise-requestargs"}},[s._v("#")]),s._v(" wrapStaticRequestPromise(promise, requestArgs)")]),s._v(" "),t("p",[s._v("与"),t("code",[s._v("wrapRequestPromise")]),s._v("钩子相同，但用于使用全局Formio对象而不是Formio实例的请求。这包括类似功能"),t("code",[s._v("Formio.loadProjects()")]),s._v("，"),t("code",[s._v("Formio.availableActions()")]),s._v("，"),t("code",[s._v("Formio.currentUser()")]),s._v("。")]),s._v(" "),t("p",[t("code",[s._v("promise")]),s._v(" 是请求的承诺。")]),s._v(" "),t("p",[t("code",[s._v("requestArgs")]),s._v(" 是包含以下属性的对象：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("url")]),s._v(": 请求的网址。")]),s._v(" "),t("li",[t("code",[s._v("method")]),s._v(": HTTP请求方法。")]),s._v(" "),t("li",[t("code",[s._v("data")]),s._v(": HTTP请求正文（如果有）。")])]),s._v(" "),t("h2",{attrs:{id:"示例插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例插件"}},[s._v("#")]),s._v(" 示例插件")]),s._v(" "),t("p",[s._v("此示例插件会将所有请求延迟5秒")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" DelayPlugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  priority"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("preRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("requestArgs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("resolve"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("resolve"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nFormio"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("registerPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DelayPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'delay'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Can later access with")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Formio.getPlugin('delay')")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])])])}),[],!1,null,null,null);e.default=a.exports}}]);